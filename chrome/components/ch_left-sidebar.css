/* Source file made available under Mozilla Public License v. 2.0 See the main repository for updates as well as full license text. 
   https://github.com/Godiesc/Chameleons-Beauty */

@media (-moz-bool-pref:"firefoxchameleon.left-sidebar") {

/* ------------------- Source file https://github.com/MrOtherGuy/firefox-csshacks/tree/master/chrome/vertical_bookmarks_toolbar.css ------------------- */

/* Makes bookmarks toolbar appear vertically at the left side of the window */

@-moz-document url(chrome://browser/content/browser.xhtml){

  :root:not([inDOMFullscreen]){
    --uc-vertical-toolbar-width: 60px;
  }
  #navigator-toolbox{ position: relative }
  #PersonalToolbar{
    position: absolute;
    display: flex;
    flex-direction: column;
    top: 100%;
    left: 0;
    width: var(--uc-vertical-toolbar-width,0);
    min-width: unset !important;
    /* These create a empty area to the bottom of the toolbar, which is to mask a fact that we don't know exactly how high the toolbar should be */
    height: 100vh;
    max-height: 100vh !important; 
    padding-bottom: 120px !important;
    padding-inline: 0px !important;                                                             /* Mi edit */    
  }
  #PersonalToolbar .toolbarbutton-1{
      min-width: var(--uc-vertical-toolbar-width) !important;                                   /* Mi edit */
    --toolbarbutton-inner-padding: 8px !important;                                              /* Mi edit */
  }    
  #PersonalToolbar #PlacesChevron{
    display: none;
  }
  #PersonalToolbar > #personal-bookmarks{
    overflow-y: auto;
    scrollbar-width: none;
    height: 100vh;
  }
  
  #PlacesToolbar,
  #PlacesToolbarDropIndicatorHolder{
    flex-direction: column;
  }
  
  #PersonalToolbar #PlacesToolbarItems{
    display: flex !important;
    flex-direction: column;
    overflow-y: auto;
    scrollbar-width: none;
  }
  #PersonalToolbar > toolbaritem{
    justify-content: center;
  }
  #PersonalToolbar #PlacesToolbarItems > toolbarseparator{
    height: 7px;
    width: calc(var(--my-vertical-toolbar-width) - 18px) !important;                                    /* My code */
    margin-inline: 9px !important;                                                                      /* My code */
    background-color: color-mix(in srgb, var(--toolbar-bgcolor) 80%, var(--lwt-tab-text)) !important;   /* My edit */
    background-clip: padding-box;
    border-block: 3px solid transparent !important;
  }

  #PersonalToolbar #PlacesToolbarItems > .bookmark-item{
    padding-block: 4px !important;
    margin-inline: 0 !important;
  }
  
  #browser,
  #browser-bottombox,
  #main-window > body::after, /* This selector is for compatibility with tabs_below_content.css */
  #customization-container{
    margin-left: var(--uc-vertical-toolbar-width,0);
  }
  :root:is([chromehidden~="toolbar"],[sizemode="fullscreen"]) > body > #browser,
  :root:is([chromehidden~="toolbar"],[sizemode="fullscreen"]) > body > #browser-bottombox,
  #main-window:is([chromehidden~="toolbar"],[sizemode="fullscreen"]) > body::after,
  :root:is([chromehidden~="toolbar"],[sizemode="fullscreen"]) > body > #customization-container{
    margin-left: 0;
  }
  /* You should probably disable this if you have Firefox < 113 */
  #PersonalToolbar #PlacesToolbarItems{
    display: -webkit-box !important;
    -webkit-box-orient: vertical !important;
  }
  
}


/* --------------------------------------- My Code to Adapt to -ONE- Style --------------------------- */
    
    /* Warning when using this style without the bookmarks toolbar set to 'Always show' */
    
    :root:has(#PersonalToolbar[collapsed="true"]) {
        --my-vertical-toolbar-width: 62px !important;
        body:before{
            content: 'You should set your Bookmarks toolbar to: "Always show"';
            background-color: var(--general-color) !important;
            color: var(--contrast-color) !important;
            display: flex;
            position: absolute !important;
            left: 0 !important;
            top: calc(var(--tab-height-personal) + var(--toolbar-height-personal) + 
                      var(--my-tab-margin-top) + var(--my-tab-margin-bottom) + 1px);
            flex-direction: column !important;
            text-align: center !important;
            background-size: 61px contain;
            width: 61px;
            height: contain;
            z-index: 4 !important;
        }
    }
    
    :root {
    --uc-vertical-toolbar-width: var(--my-vertical-toolbar-width) !important;                         /* Nuevo tamaño sidebar */
    }
    
    /* ---------------- Quitar label de items de la left-sidebar ---------------- */
    
    #personal-bookmarks .bookmark-item>.toolbarbutton-text, #import-button>.toolbarbutton-text {
        display: none !important;
    }    
        /* Without bookmarks labels - quitamos margenes que desalinean los íconos */    
        #personal-bookmarks .bookmark-item>.toolbarbutton-icon, #import-button>.toolbarbutton-icon{
            margin: 0px !important;
        }
    
        #personal-bookmarks .bookmark-item{
            margin: 0px !important;
        }

/* Posición y estilo de la barra lateral izquierda de marcadores */

    :root:not([chromehidden~="toolbar"]) #PersonalToolbar {
        --padding-top-left-sidebar: 6px !important;
        --padding-bottom-left-sidebar: 76px !important;
        --height-left-sidebar: 100vh !important;
        height: var(--height-left-sidebar) !important;
        max-height: var(--height-left-sidebar) !important;
        background-color: var(--toolbar-bgcolor) !important;
        /*top: calc(var(--toolbar-height-personal) - 0px) !important;*/
        padding-top: var(--padding-top-left-sidebar) !important;
        padding-bottom: var(--padding-bottom-left-sidebar) !important;
        z-index: 1 !important;
        border-right: 1px solid var(--chrome-content-separator-color) !important;
    }

/* Image in the left-sidebar in themes that use images */

    :root:not([chromehidden~="toolbar"]):is([lwtheme-image],[style*="--lwt-additional-images"]) #PersonalToolbar {     
        background-image: linear-gradient(var(--toolbar-bgcolor), var(--toolbar-bgcolor)),
                          linear-gradient(transparent, transparent), 
                          var(--lwt-header-image, var(--lwt-additional-images, none)) !important;
        background-repeat: repeat, repeat, var(--lwt-background-tiling) !important;
        background-position: left top !important;
        background-size: cover !important;
    }
    
/* ---------------------------- Left-sidebar + Oneline config ---------------------------- */
    
@media (-moz-bool-pref:"firefoxchameleon.oneline"){
    
    /* Margen abajo de la left-sidebar */    
    :root:not([chromehidden~="toolbar"]) #PersonalToolbar {
        --padding-bottom-left-sidebar: 38px !important;
    }
    
    /* Filtro oscuro-claro de la left-sidebar */
    :root:not([chromehidden~="toolbar"]):is([lwtheme-image],[style*="--lwt-additional-images"]) #PersonalToolbar {
         background-image: linear-gradient(var(--new-toolbar-bgcolor), var(--new-toolbar-bgcolor)),
                           linear-gradient(var(--new-toolbar-bgcolor), var(--new-toolbar-bgcolor)), 
                           var(--lwt-header-image, var(--lwt-additional-images, none)) !important;
    }}
    
/* ---------------------------- Left-sidebar + Main-image config ---------------------------- */
    
@media (-moz-bool-pref:"firefoxchameleon.main-image"){
    :root:not([chromehidden~="toolbar"]):not([lwtheme-image],[style*="--lwt-additional-images"]) #PersonalToolbar,
    :root:not([chromehidden~="toolbar"]):is([lwtheme-image],[style*="--lwt-additional-images"]) #PersonalToolbar {
         background-image: linear-gradient(var(--toolbar-bgcolor), var(--toolbar-bgcolor)),
                           linear-gradient(var(--toolbar-bgcolor), var(--toolbar-bgcolor)), 
                           var(--lwt-header-image, var(--lwt-additional-images, none)) !important;
         background-position-y: calc(0px - var(--toolbar-height-personal) - var(--tab-height-personal) - 4px) !important;
         box-shadow: none !important;
         background-size: auto !important;
         background-position: 0 calc(0px - var(--tab-height-personal) - var(--toolbar-height-personal)
                                     - var(--my-tab-margin-top) - var(--my-tab-margin-bottom)) !important;
         background-size: 100vw !important;
        border-color: transparent !important;

    }
    
    :root:not([chromehidden~="toolbar"]):is([privatebrowsingmode="temporary"]){
        #PersonalToolbar{ background-color: var(--lwt-accent-color) !important; }
    }}
    
    
/* ---------------------------- Left-sidebar + Oneline + Main-image config ---------------------------- */
    
@media (-moz-bool-pref:"firefoxchameleon.oneline") and (-moz-bool-pref:"firefoxchameleon.main-image"){
    
    /* Filtro oscuro-claro de la left-sidebar */
    :root:not([chromehidden~="toolbar"]):not([lwtheme-image],[style*="--lwt-additional-images"]) #PersonalToolbar,
    :root:not([chromehidden~="toolbar"]):is([lwtheme-image],[style*="--lwt-additional-images"]) #PersonalToolbar {
         background-position-y: calc(0px - var(--toolbar-height-personal)) !important;
    }}
    
/* ---------------------------- Left-sidebar + tree-tabs config ---------------------------- */
    
@media (-moz-bool-pref:"firefoxchameleon.tree-tabs"){
    
    /* Margen abajo de la left-sidebar */    
    :root:not([chromehidden~="toolbar"]) #PersonalToolbar {
        --padding-bottom-left-sidebar: 40px !important;
    }
    :root:not([chromehidden~="toolbar"]):not([lwtheme-image],[style*="--lwt-additional-images"]) #PersonalToolbar,
    :root:not([chromehidden~="toolbar"]):is([lwtheme-image],[style*="--lwt-additional-images"]) #PersonalToolbar {
         background-position-y: calc(1px - var(--toolbar-height-personal)) !important;
    }
    }
    
/* Tamaño botones de extensiines y botones clásicos */

   #PersonalToolbar .toolbarbutton-1{
       --toolbarbutton-inner-padding: 6px !important;
       --toolbarbutton-outer-padding: 0 4px !important;
    }

/* Iconos de Marcadores - corrección de tamaño y color de background */
    
    #PersonalToolbar #PlacesToolbarItems>.bookmark-item:not(:hover)>.toolbarbutton-icon,
    #PersonalToolbar #PlacesToolbarItems>.bookmark-item:not(.subviewbutton, [disabled="true"]):hover,
    #PersonalToolbar #PlacesToolbarItems>.bookmark-item>.toolbarbutton-icon,
    #PersonalToolbar #PlacesToolbarItems>.bookmark-item:not(.subviewbutton, [disabled="true"]){
        background-color: transparent !important;
    }

        #PersonalToolbar #PlacesToolbarItems > .bookmark-item>.toolbarbutton-icon{
        margin-block-start: 0px !important;
        height: 28px !important;
        width: 28px !important;
        padding: 6px !important;
        background-color: var(--toolbarbutton-hover-background) !important;
        border-radius: var(--toolbarbutton-border-radius) !important;
    }

/* -Otros marcadores- button */
    
    #PersonalToolbar #OtherBookmarks {
        background-color: transparent !important;
    }
    
    #PersonalToolbar #OtherBookmarks>.toolbarbutton-icon{
        margin-block-start: 4px !important;
        height: 28px !important;
        width: 28px !important;
        padding: 6px !important;
        border-radius: var(--toolbarbutton-border-radius) !important;
        background-color: transparent !important;
    }

    #PersonalToolbar #OtherBookmarks:hover>.toolbarbutton-icon{
        background-color: var(--toolbarbutton-hover-background) !important;
    }

/* Colored folders for bookmarks */

    #PlacesToolbarItems > .bookmark-item:nth-of-type(9n+1) > .toolbarbutton-icon {
        fill: var(--green) !important;
        list-style-image: url("../icons/folder1.svg") !important;
    }

    #PlacesToolbarItems > .bookmark-item:nth-of-type(9n+2) > .toolbarbutton-icon {
        fill: var(--lightgreen) !important;    
        list-style-image: url("../icons/folder2.svg") !important;
    }

    #PlacesToolbarItems > .bookmark-item:nth-of-type(9n+3) > .toolbarbutton-icon {
        fill: var(--yellowbrown) !important;
        list-style-image: url("../icons/folder3.svg") !important;
    }

    #PlacesToolbarItems > .bookmark-item:nth-of-type(9n+4) > .toolbarbutton-icon {
        fill: var(--orange) !important;
        list-style-image: url("../icons/folder4.svg") !important;
    }

    #PlacesToolbarItems > .bookmark-item:nth-of-type(9n+5) > .toolbarbutton-icon {
        fill: var(--red) !important;
        list-style-image: url("../icons/folder5.svg") !important;
    }

    #PlacesToolbarItems > .bookmark-item:nth-of-type(9n+6) > .toolbarbutton-icon {
        fill: var(--pink) !important;
        list-style-image: url("../icons/folder6.svg") !important;
    }

    #PlacesToolbarItems > .bookmark-item:nth-of-type(9n+7) > .toolbarbutton-icon {
        fill: var(--purple) !important;
        list-style-image: url("../icons/folder7.svg") !important;
    }

    #PlacesToolbarItems > .bookmark-item:nth-of-type(9n+8) > .toolbarbutton-icon {
        fill: #1b57fe !important;
        list-style-image: url("../icons/folder8.svg") !important;
    }

    #PlacesToolbarItems > .bookmark-item:nth-of-type(9n+9) > .toolbarbutton-icon {
        fill: var(--lightblue) !important;
        list-style-image: url("../icons/folder9.svg") !important;
    }

/* Carpeta "Otros Marcadores" */

    #OtherBookmarks > .toolbarbutton-icon{
        list-style-image: url("../icons/folder-otherbookmarks.svg") !important;
        fill: color-mix(in srgb, var(--button-active-bgcolor) 80%, var(--lwt-tab-text)) !important;
    }

    #PlacesToolbarItems > .bookmark-item > .toolbarbutton-icon{
        opacity: 0.8 !important;
    }

/* ----------------------------- items en modo "customize toolbar" --------------------------------- */

    /* Separador Horizontal */

    #PersonalToolbar toolbarpaletteitem[place="toolbar"][id^="wrapper-customizableui-special-spring"] {
        min-width: 0px !important;
        min-height: 2px !important;
        max-height: 72px !important;
        margin-inline: calc(var(--my-vertical-toolbar-width) / 2 - 17px ) !important;
    }

    /* Separador vertical */

    :is(#TabsToolbar) toolbarpaletteitem[place="toolbar"][id^="wrapper-customizableui-special-spring"] {
        min-width: 10px !important;
        min-height: var(--tabs-height-personal) !important;
        max-height: var(--tabs-height-personal) !important;
        margin-block: 0 !important;
    }

    /* Alinear items in customize mode */

    #PersonalToolbar toolbarpaletteitem[place="toolbar"] {
        justify-content: center !important;
    }

    /* Contador de la extension invisible en modo "customize" */

    #PersonalToolbar toolbarpaletteitem[place="toolbar"] toolbaritem toolbarbutton .toolbarbutton-badge {
        display: none !important;
    }   

/* Separador usando "espacio flexible" */

    #PersonalToolbar toolbarpaletteitem[place="toolbar"][id^="wrapper-customizableui-special-spring"], #PersonalToolbar toolbarspring {
        max-width: var(--uc-vertical-toolbar-width) !important;
        min-height: 60px !important;
        max-height: 110px !important;
    }
    
    /* --------------------------- Contador de las extensiones --------------------------- */

    /* Ocultar contador cuando este es "0" */

    toolbarbutton[badge="0"] .toolbarbutton-badge { display: none !important; }
    
     /* Contador de la extension not hover */

    #PersonalToolbar toolbaritem toolbarbutton:not(:hover,[open],:active) .toolbarbutton-badge:not(:hover) {
        background-color: #ff0000cc !important;
        color: transparent !important;
        box-shadow: none !important;
        outline: 1px solid #000000dd !important;
        border-radius: 50% !important;
        height: 4px !important;
        width: 4px !important;
        min-height: 4px !important;
        min-width: 4px !important;
        transform: translate(0px, -3px) !important;
    }
    
    /* Contador de la extension :hover */

    #PersonalToolbar toolbaritem toolbarbutton:is(:hover,[open],:active) .toolbarbutton-badge {
        box-shadow: -1px 1px 0 hsla(0, 100%, 100%, .2) inset, 1px -1px 0px hsla(0, 100%, 100%, .2) inset, 0 1px 0 hsla(206, 50%, 10%, .2) !important;
        margin-top: -6px !important;
        margin-inline-end: -6px !important;
        animation: none !important;
        border-radius: 0 var(--toolbarbutton-border-radius) !important;
    }
    
    /* ____________________ New position of Open Bookmark Panels in left-sidebar ____________________ */
    
    #PlacesToolbarItems > .bookmark-item >  menupopup, #OtherBookmarks #OtherBookmarksPopup {
        margin-inline-start: calc(var(--my-vertical-toolbar-width) - 2px) !important;
        margin-top: -36px  !important;
    }

    #PersonalToolbar>toolbarbutton>menupopup {
        margin-right: calc(var(--my-vertical-toolbar-width) - 9px) !important;
        margin-top: -39px  !important;
    }
}

/* __________________________________________________________ Firefox New Sidebar __________________________________________________________ 
   _________________________________________________________________________________________________________________________________________ */

@media (-moz-bool-pref:"sidebar.revamp") or (-moz-bool-pref:"sidebar.verticalTabs") {
    
    :root {
        --my-content-border-color: color-mix(in srgb, var(--contrast-color) 86%, var(--lwt-tab-text));                    /* Border around web content */
        --vertical-elements-width: calc(var(--my-vertical-toolbar-width) - 1px) !important;               /* WIdth of all sidebar elements */
    }
}

@media (-moz-bool-pref:"sidebar.revamp") {
    
    /* _______________ Style of the Sidebar when isn't expanded _______________ */
    
    :root:has(sidebar-main:not([expanded])) {

        /* Width of the Sidebar elements when isn't expanded */

        /* External container */
        & #sidebar-main {
            width: var(--my-vertical-toolbar-width) !important;
        }

        /* Internal container */
        & .wrapper{
            min-width: var(--vertical-elements-width) !important;
        }

        /* Tools-and-extensions */
        & .actions-list {
            max-width: var(--vertical-elements-width) !important;
        }
    }
    
    .wrapper {
        background-color: transparent !important;
        min-width: var(--vertical-elements-width) !important;
        margin-inline: 0px !important;
        padding: 0px !important;
    }
    
    .actions-list{
        appearance: none !important;
        min-width: var(--vertical-elements-width) !important;
        padding-inline: 0px !important;
    }
    
    #sidebar-main {
        background-image: linear-gradient(var(--lwt-frame, transparent), var(--lwt-frame, transparent)), 
                                          var(--lwt-additional-images,none), var(--lwt-header-image, none) !important;
        background-position: left top !important;
        background-repeat: no-repeat !important;
        background-size: auto 100% !important;
        background-attachment: scroll, fixed, fixed !important;
    }
    
    /* _______________ Buttons size the same as the Sidebar to trick 'click on border' _______________ */
    
    /* Remove all padding */
    .actions-list {
        & > moz-button {
                --button-outer-padding-inline: 0px !important;
                /*--button-outer-padding-block: 0px !important;/**/
                --button-outer-padding-inline-start: 4px !important;
                --button-outer-padding-inline-end: 4px !important;
                /*--button-outer-padding-block-start: 0px !important;/**/
                /*--button-outer-padding-block-end: 0px !important;/**/
        }
    }
    
    /* Size and Vertical space between icons */    
    .button-background[part="button"] {
        &[type~="icon"]:not(.labelled), &:not(.labelled):has(img) {
            min-width: calc(var(--vertical-elements-width) - var(--button-outer-padding-inline-start) - var(--button-outer-padding-inline-end)) !important;
        }
    }
}

/* _________________________________________________________ Firefox Vertical tabs _________________________________________________________ 
   _________________________________________________________________________________________________________________________________________ */


@media (-moz-bool-pref:"sidebar.verticalTabs") {
    
    :root {
        --my-margin-inline-outer-tab: 3px;                                                    /* Used to center tabs */
        --my-margin-inline-inner-tab: var(--my-margin-inline-outer-tab);                      /* Used to center tabs */
        --tab-block-margin: 0px !important;                                                   /* Tab margins  */
        
        --my-separator-border-style: linear-gradient(to right, transparent 4px, var(--general-color) 4px, 
                                     var(--general-color) calc(100% - 4px), transparent calc(100% - 4px));
        --my-separator-border-style1:linear-gradient(to right, transparent 6px, var(--my-content-border-color) 6px,
                                     var(--my-content-border-color) calc(100% - 6px), transparent calc(100% - 6px)) 1;
    }
    
    /* ___________________________________ Tabs*/
    
    /* Padding to the tab-stack to keep righ-click on tab border */
    
    .tabbrowser-tab[visuallyselected] > .tab-stack::before{
        margin-inline: var(--my-margin-inline-outer-tab) !important;
    }
    
    /* Remove unwanted background-color of pinned tabs */

    #vertical-pinned-tabs-container {
        & .tab-background {
            .tabbrowser-tab:not(:hover) > .tab-stack > &:not([selected], [multiselected]) {
                background-color: transparent !important;
            }
        }
    }
    
    /* Tabs big container */

    #tabbrowser-tabs[orient="vertical"] {
        /* Used for pinned tabs */
        --tab-collapsed-width: var(--vertical-elements-width) !important;
        /* used for normal tabs */
        width: var(--vertical-elements-width) !important;
    }

    /* Width of tabs when sidebar isn't expanded */
    
    #tabbrowser-tabs[orient="vertical"] {
        .tab-background {
            --tab-collapsed-background-width: calc(var(--vertical-elements-width) - var(--my-margin-inline-inner-tab)*2) !important;
            margin-inline: var(--my-margin-inline-inner-tab) !important;
            min-width: calc(var(--vertical-elements-width) - var(--my-margin-inline-inner-tab)*2) !important;
            border-radius: 5px !important;
        }
    }
    
    /* Center .tab-content 

    #tabbrowser-tabs[orient="vertical"] {
        & .tab-content {
            --tab-inline-padding: calc(var(--vertical-elements-width)/2 - 8px) !important;
        }
    }*/
    
    /* Center tabs when Sidebar is expanded 
    
    sidebar-main[expanded] > #vertical-tabs > #tabbrowser-tabs[orient="vertical"] .tabbrowser-tab {
        max-width: 100% !important;
    }*/
    
    /* Remove unwanted margin of pinned tabs when Sidebar is expanded */
    
    #tabbrowser-tabs[orient="vertical"] {
        & #vertical-pinned-tabs-container {
            padding-inline: 0px 0px !important;
        }
    }
    
    /* _____________________________________ Various separators _____________________________________ */

    /* Separator after pinned tabs */    
    #vertical-pinned-tabs-container-separator {
        display: none !important;
    }
    
    /* Margin top of the block of tabs */
    
    #vertical-tabs {
        padding-block-start: 8px !important;
    }
    
      /* Separator bottom when tabs scroll appears */
    #tabbrowser-tabs[orient="vertical"] {
        &[overflow]::after {
            content: "";
            border-bottom: var(--tabstrip-inner-border);
            margin-inline: 0px !important;
            border-image: var(--my-separator-border-style1) 1 !important;
        }
    }
    
    /* Tabs top separador when sidebar isn't expanded */
    :root:not([sizemode="fullscreen"]):has(sidebar-main:not([expanded])) {
        & #sidebar-main::before{
            position: absolute; content: '';
            width: var(--my-vertical-toolbar-width);
            border-block-start: 1px solid red !important;
            border-image: linear-gradient(to right,
                /* Transparent space */
                transparent 6px , var(--my-content-border-color) 6px,
                /* Separator line */
                var(--my-content-border-color) calc(var(--vertical-elements-width) - 6px), transparent calc(var(--vertical-elements-width) - 6px),
                /* Transparent end space + colored last pixel */
                transparent) 1 !important;
        }
    }
    
    #vertical-pinned-tabs-container-separator {
        #tabbrowser-tabs:not([expanded]) #vertical-pinned-tabs-container:not(:empty) > &, #vertical-pinned-tabs-container:not(:empty) + & {
            margin-inline: 0px !important;
            display: flex !important;
            border-image: var(--my-separator-border-style1) 1 !important;
        }
    }
    
    /* _______________________________________ New Tab button _______________________________________ */

    /* Width when sidebar isn't expanded */    
    #tabbrowser-tabs:not([expanded]) {
        & #tabbrowser-arrowscrollbox[orient="vertical"] > #tabbrowser-arrowscrollbox-periphery > #tabs-newtab-button,
        & #vertical-tabs-newtab-button{
            &:not([expanded]) {
                width: var(--vertical-elements-width) !important;
            }
        }
    }

    /* style */    
    #tabs-newtab-button .toolbarbutton-icon,
    #vertical-tabs-newtab-button .toolbarbutton-icon{
        height: 20px !important;
        width: 20px !important;
        padding: 2px !important;
        border-radius: 2px !important;
    }

    /* Container */
    #tabbrowser-arrowscrollbox[orient="vertical"] > #tabbrowser-arrowscrollbox-periphery > #tabs-newtab-button,
    #vertical-tabs-newtab-button {
        border-radius: 0px !important;
        margin-inline: 0px !important;
    }

    /* on 'hover' */
    #tabbrowser-arrowscrollbox[orient="vertical"] > #tabbrowser-arrowscrollbox-periphery > #tabs-newtab-button:hover,
    #vertical-tabs-newtab-button:hover {
        background-color: transparent !important;
    }

    #tabbrowser-arrowscrollbox[orient="vertical"] > #tabbrowser-arrowscrollbox-periphery > #tabs-newtab-button:hover .toolbarbutton-icon,
    #vertical-tabs-newtab-button:hover .toolbarbutton-icon{
        background: var(--toolbarbutton-hover-background) !important;
        border-radius: 2px !important;
    }
    
    /* _____________ 'Newtab' button style when Sidebar is expanded */
    
    sidebar-main:is([expanded]) {
        & #tabs-newtab-button {
            padding-inline: calc(var(--vertical-elements-width) / 2 - 16px) !important;
        }
        
        & #tabs-newtab-button .toolbarbutton-icon{
            width: 26px !important; 
            height: 24px !important;
            padding-inline-start: 8px !important;
            padding-block: 3px 4px !important;
            transition: none !important;
            border-radius: 3px 0 0 3px !important;
        }

        & #tabs-newtab-button .toolbarbutton-text{
            padding-block: 2px !important;
            padding-inline-start: 5px !important;
            border-radius: 0px 3px 3px 0px !important;
        }
        
        & #tabs-newtab-button:hover .toolbarbutton-text {
            background: var(--toolbarbutton-hover-background) !important;
        }
    }
    
    /* ______________________________________ Tools and extensions ______________________________________ */

    /* Tools on 'hover' */    
    .actions-list[orientation="vertical"]:hover{
        opacity: 1 !important;
        background-color: var(--lwt-frame) !important;
        transition: opacity 0.2s ease-in-out, background-color 0.4s ease;
    }
    
    /* Hide the tools except for the last one: 'configuration' . */
    .actions-list[orientation="vertical"]:not(:hover) moz-button[type="icon ghost"]:not(:last-child) {
        opacity: 0 !important;
        height: 0px !important;
    }
    
     /* Hide the 'configuration' button when there is an 'active' tool */
    .wrapper:has(.actions-list moz-button[type="icon"]) .actions-list:not(:hover) moz-button[type="icon ghost"]:is(:last-child) {
        opacity: 0 !important;
        height: 0px !important;
    }
    
    /* Smooth transition */
    moz-button[type="icon ghost"]{
        transition: opacity 0.3s ease-in-out !important;
    }
    
    /* 'Configuration' button in 1rst position when sidebar isn't hover */
    .actions-list[orientation="vertical"]:not(:hover) moz-button:last-child{
        background-color: transparent !important;
        transition: background-color 0ms ease !important;
        order: -1 !important;
    }
    
    /* shows the active tool */
    .wrapper:has(.actions-list[orientation="vertical"]:not(:hover)) moz-button[type="icon"] {
        order: -1 !important;
    }
    
    /* Keep active tool in latest position */
    .wrapper:has(.actions-list[orientation="vertical"]:is(:hover)) moz-button[type="icon"]{
        order: 1 !important;
    }
    
    /*__________________ 'Tools and extensions' when sidebar is expanded */
    
    .tools-and-extensions[orientation="horizontal"] {
        --first-last-button-width: 30px !important;
        grid-template-columns: var(--first-last-button-width) repeat(4, calc(var(--button-size-icon) + var(--space-xsmall))) calc(var(--first-last-button-width) + 11px) !important;
    }
    
    /* 'Configuration' button always in left bottom */
    
    .actions-list[orientation="horizontal"] moz-button:last-child:nth-child(-n+18){
        grid-row-start: 2 !important;
        grid-column-start:1 !important;
    }

    .actions-list[orientation="horizontal"] moz-button:last-child:nth-child(-n+12){
        grid-row-start: 2 !important;
        grid-column-start:1 !important;
    }

    .actions-list[orientation="horizontal"] moz-button:last-child:nth-child(-n+6){
        grid-row-start: 1 !important;
        grid-column-start: 1 !important;
    }
}


/* _____________________________________________________ Vertical tabs expand on hover _____________________________________________________ 
   _________________________________________________________________________________________________________________________________________ */

@media (-moz-bool-pref:"firefoxchameleon.verticalTabs-expandOnHover") and (-moz-bool-pref:"sidebar.verticalTabs") {
    
    :root {
        --my-expand-sidebar-width: 212px;
        --my-vertical-elements-width: calc(var(--my-vertical-toolbar-width) - 1px) !important;
    }
    
     /* _______________ Sidebar properties _______________ */
    
    :root:has(sidebar-main:is([expanded])) {
        & #sidebar-main {
            position: absolute !important;
            width: var(--my-vertical-elements-width) !important;
            z-index: 3 !important;
            height: calc(100% - var(--toolbar-height-personal) - var(--bookmarksbar-height-personal, 0px) - var(--menubar-height-personal, 0px)) !important;
            transition: width 0.1s ease-in-out !important;
            background-position: left calc(-2px - var(--menubar-height-personal, 0px) - var(--toolbar-height-personal) - var(--bookmarksbar-height-personal, 0px)) !important;
            background-size: auto calc(100% + 2px + var(--menubar-height-personal, 0px) + var(--toolbar-height-personal) + var(--bookmarksbar-height-personal, 0px)) !important;
        }

        & #sidebar-main:is(:hover){
            width: var(--my-expand-sidebar-width) !important;
            transition: width 0.2s ease-in-out !important;
            box-shadow: inset -1px 0 0 0 var(--my-content-border-color), 0 -1px 0 0 var(--toolbar-bgcolor) !important;
        }
    }
    
    /* Bug Fix - top separator of tabs */

    :root:not([sizemode="fullscreen"]):has(sidebar-main:is([expanded])) {
        & #sidebar-main::before {
            width: calc(var(--my-vertical-toolbar-width) + var(--my-expand-sidebar-width) ) !important;
        }
    }
    
    /* _______________ Pinned tabs _______________ */
    
    /* Size and margins */
    :root:has(sidebar-main:is([expanded])) #tabbrowser-tabs[orient="vertical"] #vertical-pinned-tabs-container {
        min-width: var(--my-expand-sidebar-width) !important;
        grid-template-columns: repeat(auto-fit, minmax(var(--my-vertical-elements-width), var(--my-vertical-elements-width))) !important;
        column-gap: 0px !important;
    }
    
    /* The selected pinned tab is visible when the sidebar is collapsed - limited to 3 rows */
    :root:has(sidebar-main:is([expanded])) #sidebar-main:not(:hover) {
        
        & #vertical-pinned-tabs-container .tabbrowser-tab[selected="true"]:nth-child(-n+15){
            grid-row-start: 2 !important;
            grid-column-start:1 !important;
        }
        
        & #vertical-pinned-tabs-container .tabbrowser-tab[selected="true"]:nth-child(-n+10){
            grid-row-start: 2 !important;
            grid-column-start:1 !important;
        }

        & #vertical-pinned-tabs-container .tabbrowser-tab[selected="true"]:nth-child(-n+5){
            grid-row-start: 1 !important;
            grid-column-start: 1 !important;
        }
        
        & .close-icon { opacity:  0 !important; } /* Hide close button in selected tab - for touch density */
        
            
        & #tabs-newtab-button .toolbarbutton-text {
            opacity: 0 !important;
        }
    
    }
    
    /* _____________ New style for 'tools and extensions' buttons */
    
    .actions-list[orientation="horizontal"] {
        justify-content: start !important;
    }
    
    /* Buttons collapsed when not 'hover'  */    
    .actions-list[orientation="horizontal"]:not(:hover) .expanded-button:not(:last-child){
        opacity: 0 !important;
    }
}

@media (-moz-bool-pref:"firefoxchameleon.verticalTabs-expandOnHover") and (-moz-bool-pref:"sidebar.verticalTabs") and (-moz-bool-pref:"sidebar.position_start") {
    
    /* _________________________________ Expand on hover - sidebar on left */
    
    :root:not([chromehidden~="toolbar"],[inDOMFullscreen]):has(sidebar-main:is([expanded])) {
        
        /* Web content */
        & #tabbrowser-tabbox{
            margin-inline-start: var(--my-vertical-toolbar-width) !important;
        }

        /* Sidebar + sidebar content */
        & #sidebar-box[checked="true"] {
            margin-inline-start: var(--my-vertical-toolbar-width) !important;
        }

        /* Sidebar + sidebar content + web content */
        & #sidebar-box[checked="true"] ~ #tabbrowser-tabbox {
            margin-inline-start: 0px !important;
        }
    }
}

@media (-moz-bool-pref:"firefoxchameleon.verticalTabs-expandOnHover") and (-moz-bool-pref:"sidebar.verticalTabs") and ( not (-moz-bool-pref:"sidebar.position_start")) {
    
    /* _________________________________ Expand on hover - sidebar on right */

    :root:not([chromehidden~="toolbar"],[inDOMFullscreen]):has(sidebar-main:is([expanded])) {

        /* Web content */
        & #tabbrowser-tabbox{
            margin-inline-end: calc(var(--my-vertical-toolbar-width) + 1px) !important;
        }

        /* Sidebar + sidebar content */
        & #sidebar-box[checked="true"] {
            margin-inline-end: var(--my-vertical-toolbar-width) !important;
        }

        /* Sidebar + sidebar content + web content */
        & #sidebar-box[checked="true"] ~ #tabbrowser-tabbox {
            margin-inline-end: 0px !important;
        }
    }

    /* Move sidebar to right position */

    :root:has(sidebar-main:is([expanded])) {
        & #sidebar-main {
            right: 0 !important;
        }
        
        & #sidebar-main:is(:hover){
            width: var(--my-expand-sidebar-width) !important;
            transition: width 0.2s ease-in-out !important;
            box-shadow: inset 1px 0 0 0 var(--my-content-border-color), 0 -1px 0 0 var(--toolbar-bgcolor) !important;
        }
    }
}

/* BUg fix: height of the Sidebar when using Firefox Vertical tabs + left-sidebar config */

@media (-moz-bool-pref:"firefoxchameleon.verticalTabs-expandOnHover") and (-moz-bool-pref:"sidebar.verticalTabs") and (-moz-bool-pref:"firefoxgx.left-sidebar") {
    
    :root:has(sidebar-main:is([expanded])) {
        & #sidebar-main {
            height: calc(100% - var(--toolbar-height-personal) - var(--menubar-height-personal, 0px)) !important;
        }
    }
}

/* ______________________________ Borders around sidebars and web content - Sidebar on left - without left-sidebar ______________________________ 
   _______________________________________________________________________________________________________________________________________________ */

@media (-moz-bool-pref: "sidebar.revamp") {
    
    /* Color tras toda la página web */

    .browserContainer, .browserStack, #browser{
        background-image: linear-gradient(var(--toolbar-bgcolor, transparent), var(--toolbar-bgcolor, transparent)), 
                                          var(--lwt-additional-images,none), var(--lwt-header-image, none) !important;
        background-position: 0 0, var(--lwt-background-alignment), right top !important;
        background-repeat: repeat-x, var(--lwt-background-tiling), no-repeat !important;
        background-size: auto 100%, var(--lwt-background-size, auto auto), auto auto !important;
        background-attachment: scroll, fixed, fixed !important;
        background-color: transparent !important;
    }
    
    /* web content */
    #tabbrowser-tabbox {
        outline: none !important;
        box-shadow: none !important;
        
        & browser {
            border-radius: 4px 0 0 0 !important;
            outline: 1px solid var(--my-content-border-color) !important;
            clip-path: xywh(-1px -1px calc(100% + 2px) calc(100% + 2px) round 5px 0 0 0);
        }
    }

    /* sidebar content */
    #sidebar {
        /*border-top: 1px solid var(--my-content-border-color) !important;
        border-inline-end: 1px solid var(--my-content-border-color) !important;/**/
        box-shadow: none !important;
    }
    
    /* Sidebar content + web content */
    #sidebar-box[checked="true"] ~ #tabbrowser-tabbox {
        /*border-top: 1px solid var(--my-content-border-color) !important;/**/
        border-radius: 8px !important;
        outline: none !important;
        
        & browser {
            border-radius: 8px !important;
            outline: 1px solid var(--sidebar-border-color) !important;
            margin-block-end: 7px !important;
        }
    }
    
    /* Web content border-top in full screen 
    :root:not([inDOMFullscreen])[sizemode="fullscreen"] #tabbrowser-tabbox {
        border-top: 1px solid var(--my-content-border-color) !important;
    }*/

    /* Border color in themes with images*/

    :root:is([lwtheme-image],[style*="--lwt-additional-images"]) {
        /* Border color around web content 
        & #tabbrowser-tabbox,*/
        /* Border color around Sidebar & Sidebar content [open] 
        #sidebar-box[checked="true"],*/
        /* Border color around Sidebar content [open] 
        #sidebar-main {
            --my-content-border-color: color-mix(in srgb, var(--toolbar-bgcolor) 90%, var(--lwt-tab-text)) !important;
        }*/
    }
}

/* _____________ Sidebar on right side */

@media (-moz-bool-pref:"sidebar.revamp") and (not (-moz-bool-pref:"sidebar.position_start")) {

    /* Border around web content */
    #tabbrowser-tabbox {
        /*border-block-start: 1px solid var(--my-content-border-color) !important;/**/  
        border-radius: 0 4px 0 0  !important;
        
        & browser {
            border-radius: 0 4px 0 0  !important;
            outline: 1px solid var(--my-content-border-color) !important;
            clip-path: xywh(-1px -1px calc(100% + 2px) calc(100% + 2px) round 0 5px 0 0  );
        }
    }
    
    /* Sidebar */
    #sidebar-main {
        justify-content: end !important;
    }
    
    /* Sidebar content */
    #sidebar {
        direction: rtl !important;
    }
}

@media ((-moz-bool-pref:"sidebar.revamp") or (-moz-bool-pref:"sidebar.verticalTabs")) and (not (-moz-bool-pref:"firefoxgx.left-sidebar")) and (-moz-bool-pref:"sidebar.position_start") {

    /* Sidebar border and color in fullscreen  
    
    &:root:is([sizemode="fullscreen"]) {
        & #sidebar-main {
            border-inline-end: 1px solid var(--my-content-border-color) !important;
        }
        &:has(sidebar-main:is([expanded])) #sidebar-main {
            border-inline-end: 0px solid var(--my-content-border-color) !important;
            box-shadow: inset -1px 1px 0 0 var(--my-content-border-color) !important;
        }
    }*/
}